{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import produce, { Draft } from \"immer\"\nimport { useState, useReducer, useMemo } from \"react\"\n\ntype Reducer<S = any, A = any> = (\n  draftState: Draft<S>,\n  action: A,\n) => void | S\n\nexport function useImmer<S = any>(initialValue: S): [S, (draft: Draft<S>) => void]\nexport function useImmer(initialValue: any) {\n  const [val, updateValue] = useState(initialValue);\n  return [\n    val,\n    updater => {\n      updateValue(produce(updater));\n    }\n  ];\n}\n\nexport function useImmerReducer<S = any, A = any>(\n  reducer: Reducer<S, A>, \n  initialState: S,\n  initialAction?: (initial: any) => S\n)\nexport function useImmerReducer(\n  reducer, initialState, initialAction  \n) {\n  const cachedReducer = useMemo(() => produce(reducer), [reducer]);\n  return useReducer(cachedReducer, initialState as any, initialAction);\n}\n"],"names":["useImmer","initialValue","useState","updater","updateValue","produce","useImmerReducer","reducer","initialState","initialAction","cachedReducer","useMemo","useReducer"],"mappings":"4FASgBA,EAASC,SACIC,EAASD,gBAC7B,eAELE,GACEC,EAAYC,EAAQF,MAU1B,SAAgBG,EACdC,EAASC,EAAcC,OAEjBC,EAAgBC,oBAAcN,EAAQE,IAAU,CAACA,WAChDK,EAAWF,EAAeF,EAAqBC"}